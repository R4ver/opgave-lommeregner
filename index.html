<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">

        <title>Claculator 1038</title>
        
        <link rel="stylesheet" href="style.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
        <script src="calc1038.js"></script>
        <script>
            $(document).ready(function() {
                $("#submitCalc").click(function() {
                    var selectedCalc = $("input[type='radio'][name='calcOption']:checked");
                    var selectedCalcVal = selectedCalc.val();
                    var valX = parseFloat($("#valX").val().replace(",", "."));
                    var valY = parseFloat($("#valY").val().replace(",", "."));

                    if ( isNaN(valX) || isNaN(valY) ) {
                        alert("Please type in numbers only");
                        return;
                    }

                    if (selectedCalcVal == "division" && valX == 0 && valY == 0) {
                        alert("Great job, you fork!");
                        $("body").css({
                            "display": "none",
                            "background-color": "black"
                        });
                    }

                    if (selectedCalc.length > 0) {
                        const calcThis = new Calc(valX, valY);

                        alert(executeFunctionByName(selectedCalcVal, Calc, calcThis).toFixed(2));

                    } else {
                        console.log("Please select calc");
                    }
                });

                function executeFunctionByName(functionName, context) {
                    var args = [].slice.call(arguments).splice(2);
                    var namespaces = functionName.split(".");
                    var func = namespaces.pop();
                    for(var i = 0; i < namespaces.length; i++) {
                        context = context[namespaces[i]];
                    }
                    return context[func].apply(this, args);
                }
            });            
        </script>
    </head>
    <body>
        
        <div id="calculator">
            <form action="">
                <div class="calc-options">
                        <ul>
                            <li><label><p>Addition</p><input type="radio" checked name="calcOption" value="addition"></label></li>
                            <li><label><p>Subtraction</p><input type="radio" name="calcOption" value="subtraction"></label></li>
                            <li><label><p>Multiplication</p><input type="radio" name="calcOption" value="multiplication"></label></li>
                            <li><label><p>Division</p><input type="radio" name="calcOption" value="division"></label></li>
                        </ul>
                </div>

                <div class="calc-input">
                    <input type="text" id="valX" placeholder="First number">
                    <input type="text" id="valY" placeholder="Second number">
                    <a href="#" id="submitCalc">Calculate</a>
                </div>
            </form>
        </div>

    </body>
</html>